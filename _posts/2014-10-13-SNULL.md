---
layout: post
title: "SNULL网络设备驱动"
description: ""
category: C&&C++
tags: []
---

SNULL指Simple Network Utility for Loading Localities,是区域装载的简单网络工具，可以用来实现串口上网。

SNULL的优点在于不和任何硬件相关，而只是操作从内核分配的一些内存。所以在任何操作系统上都能实现而不用在驱动里进行硬件配置
，具有很好的移植性。易于理解，可以对照DM9000网络设备驱动程序和LDD的这一章学习。

-------------------------------------------------------------

##net_device结构体##
net_devic结构体描述了网络设备数据和操作。部分定义如下：

{% highlight objc %}
struct net_device {
 char            name[IFNAMSIZ];    //网络设备的具体名字
 struct net_device_stats* (*get_stats)(struct net_device *dev);
 struct net_device_stats stats; 
 //网卡发送包的个数等等，ifconfig eth0看到的东西
 ...
 void   *priv; 
 int   (*hard_start_xmit) (struct sk_buff *skb,
          struct net_device *dev);
 ...
 int   (*open)(struct net_device *dev);
 int   (*stop)(struct net_device *dev);
 ...
{% endhighlight %}

其中的open,stop就对结构体成员进行操作。priv是一个私有的数据指针，具举足轻重的作用。它的获取是使用函数
 
    net_device *dev;
    dev->priv = netdev_priv(dev)
    
获取。不能直使用dev.priv。原因解析参见[3]。

(TBD)
--------------------------------------------------------------------

##Reference##
[1].http://my.oschina.net/lvyi/blog/325785

[2].http://blog.sina.com.cn/s/blog_478ef86301007vq7.html
