I"5Ì<h2 id="svm">SVM</h2>
<p>SVMï¼ˆSupport Vector Machineï¼‰æ˜¯ä¸€ç§æ¨¡å¼è¯†åˆ«(Pattern Recognitionï¼‰çš„æ–¹æ³•ï¼Œå¯ä»¥ä½œä¸ºåˆ†ææ•°æ®è¿›è¡Œå¤„ç†çš„æ¨¡å‹ã€‚ä¸»è¦æ˜¯è¿›è¡Œåˆ†ç±»ã€‚</p>

<p>SVMç”¨ä¸€ç³»åˆ—çš„è®­ç»ƒé›†(Train Set)ï¼Œå»ºç«‹ä¸€ä¸ªç‰¹å¾å‚æ•°çš„æ¨¡å‹ã€‚æ‰€æœ‰çš„æ•°æ®è¢«æ ‡è®°ä¸ºäºŒä¸ªé›†åˆä¸­çš„ä¸€ä¸ªï¼Œå¦‚{æ˜¯ï¼Œä¸æ˜¯}ã€‚ç„¶åé€šè¿‡æµ‹è¯•é›†(Test Set)å¯¹è®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œè¯„æµ‹ã€‚è¿™ä¸€ç³»åˆ—å·¥ä½œå¯ä»¥é€šè¿‡SVMTorchæˆ–è€…SVMLightå®Œæˆã€‚</p>

<hr />
<h2 id="vadæ£€æµ‹">VADæ£€æµ‹</h2>
<p>ç°åœ¨å¯ä»¥çœ‹ä¸€ä¸‹SVMç®€å•çš„åº”ç”¨ã€‚åœ¨è¯­éŸ³è¯†åˆ«è®¾å¤‡ä¸­ï¼Œéœ€è¦å¯¹è¯­éŸ³ä¿¡å·çš„èµ·å§‹å’Œç»ˆæ­¢åšå‡ºåˆ’åˆ†ï¼Œç„¶åæŠŠè¿™ä¸ªè¯­éŸ³ä¿¡å·é€åˆ°ä¸‹ä¸€çº§è¿›è¡Œè¯†åˆ«å¤„ç†ã€‚è¿™ä¹Ÿå°±æ˜¯VADæ£€æµ‹(Voice Activation Detection)ã€‚</p>

<p>ç°å€Ÿç”¨ä¸€ä¸ªæœ‰180æ®µå½•éŸ³çš„éŸ³é¢‘æ•°æ®è¿›è¡Œæµ‹è¯•å®éªŒã€‚éŸ³é¢‘æ•°æ®é‡Œçš„å†…å®¹æ˜¯â€œå¤©å¤©â€â€œååâ€ã€‚é‡‡æ ·ç‡ä¸º16000bpsã€‚å¯¹ä¿¡å·åˆ†å¸§ï¼Œ256ä¸ªç‚¹ä½œä¸ºä¸€å¸§(frame)ã€‚ä¸€å¸§æ•°æ®è·å–åˆ°çš„è¯­éŸ³ç‰¹å¾è¿‡å°‘ï¼Œæ‰€ä»¥æŠŠ10å¸§åˆæˆä¸ºä¸€çª—(window)è¿›è¡Œç‰¹å¾æå–ã€‚é€šè¿‡äººå·¥å¯¹è¿™äº›windowsè¿›è¡Œæ ‡è®°ï¼Œæ˜¯è¯­éŸ³çª—æ ‡è®°ä¸º+1ï¼Œä½œä¸ºæ­£ä¾‹ã€‚ä¸æ˜¯è¯­éŸ³çª—æ ‡è®°ä¸º-1ï¼Œä½œä¸ºè´Ÿä¾‹ã€‚</p>

<p>ä»æ‰€æœ‰windowsä¸­é€‰å–8000ä¸ªæ­£ä¾‹å’Œ8000ä¸ªè´Ÿä¾‹å½¢æˆtrainsetï¼Œå‰©ä¸‹çš„windowsä½œä¸ºtestsetã€‚ä»ä¸Šä¸€æ­¥ç”Ÿæˆçš„â€œååâ€å’Œâ€œå¤©å¤©â€çš„cellä¸­è¯»å–æ•°æ®ã€‚Matlabä»£ç å¦‚ä¸‹ï¼š</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc">    <span class="n">clear</span> <span class="n">all</span><span class="p">;</span>
    <span class="n">clc</span><span class="p">;</span>
    <span class="n">close</span> <span class="n">all</span><span class="p">;</span>
    <span class="n">load</span> <span class="n">xtrain_s_hh</span><span class="p">;</span>
    <span class="n">total_length</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="n">x1</span><span class="o">=</span><span class="n">zeros</span><span class="p">(</span><span class="mi">62000</span><span class="p">,</span><span class="mi">451</span><span class="p">);</span>
   
    <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="o">:</span><span class="n">length</span><span class="p">(</span><span class="n">xtrain_s_hh</span><span class="p">)</span>
        <span class="n">a</span><span class="o">=</span><span class="n">xtrain_s_hh</span><span class="p">{</span><span class="n">i</span><span class="p">};</span>
        <span class="n">current_length</span><span class="o">=</span><span class="n">total_length</span><span class="p">;</span>
        <span class="n">total_length</span><span class="o">=</span><span class="n">total_length</span><span class="k">+</span><span class="n">size</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">for</span> <span class="n">j</span><span class="o">=</span><span class="mi">1</span><span class="o">:</span><span class="n">size</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">x1</span><span class="p">(</span><span class="n">current_length</span><span class="k">+</span><span class="n">j</span><span class="p">,</span><span class="o">:</span><span class="p">)</span><span class="o">=</span><span class="n">xtrain_s_hh</span><span class="p">{</span><span class="n">i</span><span class="p">}(</span><span class="n">j</span><span class="p">,</span><span class="o">:</span><span class="p">);</span>
        <span class="n">end</span>
    <span class="n">end</span>

   
    <span class="n">clear</span> <span class="n">xtrain_s_hh</span><span class="p">;</span> <span class="o">%</span><span class="err">é˜²æ­¢</span><span class="n">Out</span> <span class="n">of</span> <span class="n">Memory</span>
    <span class="n">load</span> <span class="n">xtrain_s_tt</span><span class="p">;</span>

    <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="o">:</span><span class="mi">100</span>
        <span class="n">a</span><span class="o">=</span><span class="n">xtrain_s_tt</span><span class="p">{</span><span class="n">i</span><span class="p">};</span>
        <span class="n">current_length</span><span class="o">=</span><span class="n">total_length</span><span class="p">;</span>
        <span class="n">total_length</span><span class="o">=</span><span class="n">total_length</span><span class="k">+</span><span class="n">size</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">for</span> <span class="n">j</span><span class="o">=</span><span class="mi">1</span><span class="o">:</span><span class="n">size</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">x1</span><span class="p">(</span><span class="n">current_length</span><span class="k">+</span><span class="n">j</span><span class="p">,</span><span class="o">:</span><span class="p">)</span><span class="o">=</span><span class="n">xtrain_s_tt</span><span class="p">{</span><span class="n">i</span><span class="p">}(</span><span class="n">j</span><span class="p">,</span><span class="o">:</span><span class="p">);</span>
        <span class="n">end</span>
    <span class="n">end</span>
    <span class="n">clear</span> <span class="n">xtrain_s_tt</span><span class="p">;</span></code></pre></figure>

<p>ç„¶åè¿›è¡Œtrainsetå’Œtestsetçš„ç”Ÿæˆï¼š</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc">    <span class="n">loaddata</span><span class="p">;</span>
    <span class="o">%</span> <span class="n">trainset</span>
    <span class="n">posSet</span> <span class="o">=</span> <span class="n">x1</span><span class="p">(</span><span class="n">x1</span><span class="p">(</span><span class="o">:</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">,</span> <span class="o">:</span><span class="p">);</span>
    <span class="n">negSet</span> <span class="o">=</span> <span class="n">x1</span><span class="p">(</span><span class="n">x1</span><span class="p">(</span><span class="o">:</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span><span class="o">==-</span><span class="mi">1</span><span class="p">,</span> <span class="o">:</span><span class="p">);</span>

    <span class="n">aa</span> <span class="o">=</span> <span class="n">randperm</span><span class="p">(</span><span class="mi">9933</span><span class="p">);</span>
    <span class="n">trainSet</span> <span class="o">=</span> <span class="n">posSet</span><span class="p">(</span><span class="n">aa</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">8000</span><span class="p">),</span> <span class="o">:</span><span class="p">);</span>

    <span class="n">bb</span> <span class="o">=</span> <span class="n">randperm</span><span class="p">(</span><span class="mi">52205</span><span class="p">);</span>
    <span class="n">trainSet</span> <span class="o">=</span> <span class="p">[</span><span class="n">trainSet</span><span class="err">;</span> <span class="n">negSet</span><span class="p">(</span><span class="n">bb</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">8000</span><span class="p">),</span> <span class="o">:</span><span class="p">)];</span>
    <span class="n">sum</span><span class="p">(</span><span class="n">trainSet</span><span class="p">(</span><span class="o">:</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span><span class="o">==-</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="o">%</span> <span class="n">testset</span>
    <span class="n">testSet</span> <span class="o">=</span> <span class="n">posSet</span><span class="p">(</span><span class="n">aa</span><span class="p">(</span><span class="mi">8001</span><span class="o">:</span><span class="n">end</span><span class="p">),</span> <span class="o">:</span><span class="p">);</span>
    <span class="n">testSet</span> <span class="o">=</span> <span class="p">[</span><span class="n">testSet</span><span class="err">;</span> <span class="n">negSet</span><span class="p">(</span><span class="n">bb</span><span class="p">(</span><span class="mi">8001</span><span class="o">:</span><span class="mi">10000</span><span class="p">),</span> <span class="o">:</span><span class="p">)];</span>

    <span class="o">%</span> <span class="n">transform</span> <span class="mi">451</span> <span class="n">to</span> <span class="mi">30</span> <span class="n">dimensions</span>
    <span class="n">dimension</span><span class="o">=</span><span class="mi">30</span><span class="p">;</span>
    <span class="n">feature</span><span class="o">=</span><span class="mi">3</span><span class="p">;</span>
    <span class="n">xtrain_lab1</span><span class="o">=</span><span class="p">[];</span>
    <span class="k">for</span> <span class="n">gap</span><span class="o">=</span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span>
        <span class="n">temp</span><span class="o">=</span><span class="p">[</span><span class="n">trainSet</span><span class="p">(</span><span class="o">:</span><span class="p">,(</span><span class="mi">13</span><span class="o">+</span><span class="n">gap</span><span class="o">*</span><span class="mi">45</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="mi">15</span><span class="o">+</span><span class="n">gap</span><span class="o">*</span><span class="mi">45</span><span class="p">))];</span>
        <span class="n">xtrain_lab1</span><span class="o">=</span><span class="p">[</span><span class="n">xtrain_lab1</span><span class="p">,</span><span class="nf">temp</span><span class="p">];</span> <span class="o">%</span><span class="mi">30</span> <span class="n">dimensions</span>
    <span class="n">end</span>
    <span class="n">xtrain_lab1</span><span class="o">=</span><span class="p">[</span><span class="n">xtrain_lab1</span><span class="p">,</span><span class="n">trainSet</span><span class="p">(</span><span class="o">:</span><span class="p">,</span><span class="mi">451</span><span class="p">)];</span>

    <span class="n">xtest_lab1</span><span class="o">=</span><span class="p">[];</span>
    <span class="k">for</span> <span class="n">gap</span><span class="o">=</span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span>
        <span class="n">temp</span><span class="o">=</span><span class="p">[</span><span class="n">testSet</span><span class="p">(</span><span class="o">:</span><span class="p">,(</span><span class="mi">13</span><span class="o">+</span><span class="n">gap</span><span class="o">*</span><span class="mi">45</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="mi">15</span><span class="o">+</span><span class="n">gap</span><span class="o">*</span><span class="mi">45</span><span class="p">))];</span>
        <span class="n">xtest_lab1</span><span class="o">=</span><span class="p">[</span><span class="n">xtest_lab1</span><span class="p">,</span><span class="nf">temp</span><span class="p">];</span> 
    <span class="n">end</span>
    <span class="n">xtest_lab1</span><span class="o">=</span><span class="p">[</span><span class="n">xtest_lab1</span><span class="p">,</span><span class="n">testSet</span><span class="p">(</span><span class="o">:</span><span class="p">,</span><span class="mi">451</span><span class="p">)];</span>

    <span class="o">%</span> <span class="s">"xtrain_lab1"</span> <span class="n">normalization</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">xtrain_lab1</span><span class="p">(</span><span class="o">:</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span><span class="n">dimension</span><span class="p">)</span><span class="err">'</span><span class="p">;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">X</span><span class="p">(</span><span class="o">:</span><span class="p">);</span>
    <span class="n">Y</span> <span class="o">=</span> <span class="n">reshape</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">feature</span><span class="p">,</span> <span class="n">size</span><span class="p">(</span><span class="n">xtrain_lab1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">size</span><span class="p">(</span><span class="n">xtrain_lab1</span><span class="p">(</span><span class="o">:</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span><span class="n">end</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="n">feature</span><span class="p">)</span><span class="err">'</span><span class="p">;</span>
    <span class="n">xtrain_norm</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="n">size</span><span class="p">(</span><span class="n">Y</span><span class="p">));</span>
    <span class="n">MaxVec</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">MinVec</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">for</span> <span class="n">idx</span> <span class="o">=</span> <span class="mi">1</span><span class="o">:</span><span class="n">feature</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">Y</span><span class="p">(</span><span class="o">:</span><span class="p">,</span> <span class="n">idx</span><span class="p">);</span>
        <span class="n">lggr</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="n">MaxVec</span><span class="p">(</span><span class="n">idx</span><span class="p">);</span>
        <span class="n">lgle</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">MinVec</span><span class="p">(</span><span class="n">idx</span><span class="p">);</span>
        <span class="n">lgbe</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">MinVec</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">MaxVec</span><span class="p">(</span><span class="n">idx</span><span class="p">);</span>
        <span class="n">x</span><span class="p">(</span><span class="n">lggr</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="n">x</span><span class="p">(</span><span class="n">lgle</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">x</span><span class="p">(</span><span class="n">lgbe</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">(</span><span class="n">lgbe</span><span class="p">)</span> <span class="k">-</span> <span class="n">MinVec</span><span class="p">(</span><span class="n">idx</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="n">MaxVec</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span> <span class="k">-</span> <span class="n">MinVec</span><span class="p">(</span><span class="n">idx</span><span class="p">));</span>
        <span class="n">xtrain_norm</span><span class="p">(</span><span class="o">:</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
    <span class="n">end</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">xtrain_norm</span><span class="err">'</span><span class="p">;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">X</span><span class="p">(</span><span class="o">:</span><span class="p">);</span>
    <span class="n">xtrain_norm_win</span> <span class="o">=</span> <span class="n">reshape</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="n">length</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="n">dimension</span><span class="p">)</span><span class="err">'</span><span class="p">;</span>
    <span class="n">xtrain_norm_win</span> <span class="o">=</span> <span class="p">[</span><span class="n">xtrain_norm_win</span><span class="p">,</span> <span class="n">xtrain_lab1</span><span class="p">(</span><span class="o">:</span><span class="p">,</span> <span class="n">end</span><span class="p">)];</span>

    <span class="o">%</span> <span class="s">"xtest_lab1"</span> <span class="n">normalization</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">xtest_lab1</span><span class="p">(</span><span class="o">:</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span><span class="n">dimension</span><span class="p">)</span><span class="err">'</span><span class="p">;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">X</span><span class="p">(</span><span class="o">:</span><span class="p">);</span>
    <span class="n">Y</span> <span class="o">=</span> <span class="n">reshape</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">feature</span><span class="p">,</span> <span class="n">size</span><span class="p">(</span><span class="n">xtest_lab1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">size</span><span class="p">(</span><span class="n">xtest_lab1</span><span class="p">(</span><span class="o">:</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span><span class="n">end</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="n">feature</span><span class="p">)</span><span class="err">'</span><span class="p">;</span>
    <span class="n">xtest_norm</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="n">size</span><span class="p">(</span><span class="n">Y</span><span class="p">));</span>
    <span class="k">for</span> <span class="n">idx</span> <span class="o">=</span> <span class="mi">1</span><span class="o">:</span><span class="n">feature</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">Y</span><span class="p">(</span><span class="o">:</span><span class="p">,</span> <span class="n">idx</span><span class="p">);</span>
        <span class="n">lggr</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="n">MaxVec</span><span class="p">(</span><span class="n">idx</span><span class="p">);</span>
        <span class="n">lgle</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">MinVec</span><span class="p">(</span><span class="n">idx</span><span class="p">);</span>
        <span class="n">lgbe</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">MinVec</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">MaxVec</span><span class="p">(</span><span class="n">idx</span><span class="p">);</span>
        <span class="n">x</span><span class="p">(</span><span class="n">lggr</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="n">x</span><span class="p">(</span><span class="n">lgle</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">x</span><span class="p">(</span><span class="n">lgbe</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">(</span><span class="n">lgbe</span><span class="p">)</span> <span class="k">-</span> <span class="n">MinVec</span><span class="p">(</span><span class="n">idx</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="n">MaxVec</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span> <span class="k">-</span> <span class="n">MinVec</span><span class="p">(</span><span class="n">idx</span><span class="p">));</span>
        <span class="n">xtest_norm</span><span class="p">(</span><span class="o">:</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
    <span class="n">end</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">xtest_norm</span><span class="err">'</span><span class="p">;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">X</span><span class="p">(</span><span class="o">:</span><span class="p">);</span>
    <span class="n">xtest_norm_win</span> <span class="o">=</span> <span class="n">reshape</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="n">length</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="n">dimension</span><span class="p">)</span><span class="err">'</span><span class="p">;</span>
    <span class="n">xtest_norm_win</span> <span class="o">=</span> <span class="p">[</span><span class="n">xtest_norm_win</span><span class="p">,</span> <span class="n">xtest_lab1</span><span class="p">(</span><span class="o">:</span><span class="p">,</span> <span class="n">end</span><span class="p">)];</span></code></pre></figure>

<p>è¿™é‡Œé€‰å–èƒ½é‡ï¼Œè¿‡é›¶ç‡ï¼Œèƒ½é‡*è¿‡é›¶ç‡å€¼,MFCCçš„12ä¸ªç‰¹å¾å€¼ä½œä¸ºä¸€ä¸ªå¸§çš„ç‰¹å¾ï¼Œé‚£ä¹ˆä¸€ä¸ªwindowçš„ç‰¹å¾å°±æ˜¯150ç»´ã€‚è¿™é‡Œå…ˆä¸è¿›è¡ŒPCAé™ç»´ã€‚ç„¶åå°†è¿™äº›æ ‡è®°äº†+1ï¼Œ-1çš„ç‰¹å¾è¿›è¡Œè¾“å‡ºï¼Œæ ¼å¼éµç…§SVMlightæˆ–è€…SVMtorchçš„æ ¼å¼è¦æ±‚ã€‚è¿™é‡Œç”¨SVMlightã€‚</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc">    <span class="n">fidTrain</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="err">'</span><span class="n">xtrain_light_norm_30d</span><span class="p">.</span><span class="n">txt</span><span class="sc">','</span><span class="n">w</span><span class="err">'</span><span class="p">);</span>
    <span class="n">fidTest</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="err">'</span><span class="n">xtest_light_norm_30d</span><span class="p">.</span><span class="n">txt</span><span class="sc">','</span><span class="n">w</span><span class="err">'</span><span class="p">);</span>
    <span class="k">for</span> <span class="n">idx</span> <span class="o">=</span> <span class="mi">1</span><span class="o">:</span><span class="n">size</span><span class="p">(</span><span class="n">xtrain_norm_win</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">one</span> <span class="o">=</span> <span class="n">xtrain_norm_win</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="o">:</span><span class="p">);</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">fidTrain</span><span class="p">,</span><span class="err">'</span><span class="o">%</span><span class="k">+</span><span class="n">d</span> <span class="err">'</span><span class="p">,</span><span class="n">int8</span><span class="p">(</span><span class="n">one</span><span class="p">(</span><span class="n">end</span><span class="p">)));</span>
        <span class="k">for</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="o">:</span><span class="p">(</span><span class="n">size</span><span class="p">(</span><span class="n">xtrain_norm_win</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">fprintf</span><span class="p">(</span><span class="n">fidTrain</span><span class="p">,[</span><span class="n">int2str</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="err">'</span><span class="o">:%</span><span class="n">f</span> <span class="err">'</span><span class="p">],</span> <span class="n">one</span><span class="p">(</span><span class="n">j</span><span class="p">));</span>
        <span class="n">end</span>
        <span class="nf">fprintf</span><span class="p">(</span><span class="n">fidTrain</span><span class="p">,</span><span class="sc">'\n'</span><span class="p">);</span>
    <span class="n">end</span>

    <span class="k">for</span> <span class="n">idx</span> <span class="o">=</span> <span class="mi">1</span><span class="o">:</span><span class="n">size</span><span class="p">(</span><span class="n">xtest_norm_win</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">one</span> <span class="o">=</span> <span class="n">xtest_norm_win</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="o">:</span><span class="p">);</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">fidTest</span><span class="p">,</span><span class="err">'</span><span class="o">%</span><span class="k">+</span><span class="n">d</span> <span class="err">'</span><span class="p">,</span><span class="n">int8</span><span class="p">(</span><span class="n">one</span><span class="p">(</span><span class="n">end</span><span class="p">)));</span>
        <span class="k">for</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="o">:</span><span class="p">(</span><span class="n">size</span><span class="p">(</span><span class="n">xtest_norm_win</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">fprintf</span><span class="p">(</span><span class="n">fidTest</span><span class="p">,[</span><span class="n">int2str</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="err">'</span><span class="o">:%</span><span class="n">f</span> <span class="err">'</span><span class="p">],</span> <span class="n">one</span><span class="p">(</span><span class="n">j</span><span class="p">));</span>
        <span class="n">end</span>
        <span class="nf">fprintf</span><span class="p">(</span><span class="n">fidTest</span><span class="p">,</span><span class="sc">'\n'</span><span class="p">);</span>
    <span class="n">end</span>
    <span class="nf">fclose</span><span class="p">(</span><span class="n">fidTrain</span><span class="p">);</span>
    <span class="n">fclose</span> <span class="p">(</span><span class="n">fidTest</span><span class="p">);</span></code></pre></figure>

<p>æ¥ä¸‹æ¥ç”¨testsetæµ‹è¯•å‡ºç”¨ä¸åŒå‚æ•°è°ƒå‡ºçš„æœ€ä¼˜æ¨¡å‹ã€‚</p>

<hr />
<h2 id="è®­ç»ƒå‡ºçš„æ¨¡å‹å¦‚ä½•å¯¼å…¥åˆ°å®æ—¶ç¨‹åºè¿›è¡Œåˆ¤å®š">è®­ç»ƒå‡ºçš„æ¨¡å‹å¦‚ä½•å¯¼å…¥åˆ°å®æ—¶ç¨‹åºè¿›è¡Œåˆ¤å®š</h2>

<p><img src="http://static.oschina.net/uploads/space/2014/0615/165102_5T06_1420197.png" alt="åœ¨æ­¤è¾“å…¥å›¾ç‰‡æè¿°" /></p>

<table>
  <tbody>
    <tr>
      <td>å¦‚å›¾æ‰€ç¤ºï¼ŒXiä¸ºç‰¹å¾å‘é‡ï¼ŒYiä¸º{-1,1}é›†åˆä¸­çš„å€¼ã€‚é€šè¿‡ä¸Šé¢çš„è®­ç»ƒæ‰¾å‡ºæœ€ä¼˜çš„è¶…å¹³é¢ Wâ€¢X-b=0ï¼ŒWä¸ºè¶…å¹³é¢çš„æ³•å‘é‡ã€‚b/</td>
      <td>Â </td>
      <td>W</td>
      <td>Â </td>
      <td>æ˜¯æ³•å‘é‡çš„é•¿ã€‚é‚£ä¹ˆé»‘è‰²çš„ç‚¹æ»¡è¶³Wâ€¢Xi-b &gt; 1ï¼Œç™½è‰²çš„ç‚¹æ»¡è¶³Wâ€¢Xi-b &lt; -1ã€‚é‚£ä¹ˆåœ¨ç¨‹åºé‡Œå°±å¯ä»¥è¿›è¡Œå®æ—¶jugdeäº†ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>ç”¨é€‰å®šçš„trainsetè®­ç»ƒå‡ºmodelï¼Œmodelå®è´¨ä¹Ÿå°±æ˜¯Wå‘é‡å’Œbçš„å€¼ã€‚æ‰“å¼€SVMlightå¯ä»¥çœ‹è§æœ‰å¤šä¸ªæ”¯æŒå‘é‡å’Œä¸€ä¸ªbå€¼ã€‚</li>
  <li>æŠŠMatlabç®—å¾—çš„ç³»æ•°(W,b)ä»¥åˆé€‚çš„å½¢å¼(æ•°ç»„ï¼Œç»“æ„ä½“ï¼‰æ”¾å…¥åˆ°Cä¸­ã€‚</li>
  <li>å®æ—¶é‡‡æ ·çš„è¯­éŸ³ä¿¡å·é€šè¿‡Cé‡Œçš„ç‰¹å¾ï¼ˆMFCCï¼Œè¿‡é›¶ç‡ï¼Œèƒ½é‡ï¼‰æå–ç¨‹åºç®—å¾—æŒ‡å®šç»´åº¦çš„ç‰¹å¾Xiã€‚</li>
  <li>é€šè¿‡è®¡ç®—Wâ€¢Xi-bçš„å€¼å¤§äº1æˆ–è€…å°äº-1å¾—å‡ºé‡‡æ ·ä¿¡å·æ˜¯ä¸æ˜¯è¯­éŸ³ä¿¡å·ã€‚</li>
</ul>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMatlabçš„ç‰¹å¾æå–ç¨‹åºå¿…é¡»å’ŒCå®Œå…¨ä¸€è‡´ã€‚ä¸ç„¶è®­ç»ƒå‡ºmodelçš„é‚£äº›ç³»æ•°ç›´æ¥æ”¾åˆ°Cé‡Œé¢å°±ä¸é€‚ç”¨äº†ã€‚</p>

<hr />
<h2 id="train--test">Train &amp;&amp; Test</h2>
<p>ç¬”è€…é‡‡ç”¨SVMlightå·¥å…·è¿›è¡Œè®­ç»ƒå’Œæµ‹è¯•ã€‚åœ¨svmlightè½¯ä»¶ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤ï¼š</p>

<p>./svm_learn xtrain_150d.txt</p>

<p>è®­ç»ƒç»“æœå¦‚ä¸‹ï¼š
<img src="http://static.oschina.net/uploads/space/2014/0617/124159_qKo4_1420197.png" alt="åœ¨æ­¤è¾“å…¥å›¾ç‰‡æè¿°" /></p>

<p>ç„¶åå¯¹ç”Ÿæˆçš„æ¨¡å‹svm_model_150dè¿›è¡Œæµ‹è¯•ï¼Œæ‰§è¡Œå‘½ä»¤</p>

<p>./svm_classify xtest_light_norm_150d.txt svm_model output_150d</p>

<p>å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>

<p><img src="http://static.oschina.net/uploads/space/2014/0617/124228_QBgY_1420197.png" alt="åœ¨æ­¤è¾“å…¥å›¾ç‰‡æè¿°" /></p>

<p>recallä¸º71%å·¦å³ï¼Œæ•ˆæœè¿˜ç®—ç†æƒ³ï¼Œåé¢åº”è¯¥å¯¹ç‰¹å¾è¿›è¡Œé‡æ–°é€‰æ‹©æˆ–è€…å¯¹è®­ç»ƒçš„å‚æ•°è¿›è¡Œå¾®è°ƒã€‚</p>

<p>åŠ å…¥å‚æ•°-c ./svm_classify -c 0.01 xtest_light_norm_150d.txt svm_model output_150d</p>

<p>Precision / Recallæ¯”ç‡é«˜è¾¾97.67% /90.95%ï¼Œè¿™å°±å¯ä»¥ç”¨è¿™ä¸ªæ¨¡å‹è¿›è¡ŒCå®ç°äº†ã€‚</p>

<hr />
<h2 id="æ¨¡å‹è¿›è¡Œå‚æ•°è½¬æ¢">æ¨¡å‹è¿›è¡Œå‚æ•°è½¬æ¢</h2>

<p>svm_lightè®­ç»ƒå‡ºæ¥çš„æ¨¡å‹æ•°æ®æ ¼å¼æ˜¯è¿™æ ·çš„ï¼š</p>

<p>SVM-light Version V6.02</p>

<p>150 # highest feature index</p>

<p>16000 # number of training documents</p>

<p>2467 # number of support vectors plus 1   2466 vectors</p>

<p>14.60996 # threshold b, each following line is a SV (starting with alpha*y)</p>

<p>-0.10000000000000000555111512312578 1:-2.6072149 2:-0.386718 3:-4.7835841 4:1.24163 5:-2.846272 6:2.602037 7:-2.354259 8:2.0891199 9:0.71786201 10:-0.762326 11:0.94002402 12:-0.43815601 13:0.013226 14:0 15:0 16:-4.1096439 17:-1.669122 18:-4.8028402 19:3.3105819 20:0.51009297 21:4.9304528 22:-4.73594 23:0.34844199 24:1.549247 25:0.031539001 26:2.0623391 27:-0.066358998 28:0.015391 29:0 30:0 31:-5.746675 32:-0.237827 33:0.197589 34:4.5699081 35:0.0037120001 36:2.6799929 37:-3.70121 38:-1.757226 39:-0.72618198 40:-2.49002 41:0.69152498 42:-0.457647 43:0.032465 44:0 45:0 46:-6.4179931 47:-0.69469702 48:-0.69478399 49:3.78141 50:0.31874901 51:-0.39264899 52:-3.5847859 53:1.812808 54:0.81401801 55:-2.5526011 56:-0.32375601 57:-0.69582701 58:0.090738997 59:0 60:0 61:-5.1000252 62:-2.146148 63:-4.458828 64:3.943033 65:-0.117736 66:1.385269 67:-4.1872921 68:0.50814003 69:0.365538 70:-0.013903 71:-0.178859 72:-0.49208501 73:0.029083 74:0 75:0 76:-7.209651 77:-3.5355501 78:-3.4768031 79:5.466105 80:0.90299797 81:2.5297711 82:-0.87344199 83:2.061152 84:-0.52099699 85:-0.489656 86:1.120425 87:-0.34177899 88:0.012507 89:0 90:0 91:-2.4900229 92:0.87366498 93:-1.219308 94:6.570838 95:-0.66704899 96:2.664654 97:-2.772584 98:2.3200381 99:0.128732 100:-1.34489 101:1.447106 102:-0.264539 103:0.016508 104:0 105:0 106:-3.7242949 107:1.571139 108:0.61830097 109:5.7569218 110:0.104916 111:-0.21683399 112:-3.0075519 113:1.499946 114:-0.30457601 115:-0.90873897 116:1.7306581 117:-0.101519 118:0.015194 119:0 120:0 121:-3.0614409 122:-0.53184998 123:-3.157887 124:4.1598859 125:-2.2302539 126:2.255312 127:-3.982137 128:0.69850898 129:0.98338699 130:-0.70040601 131:0.25580299 132:-0.40691599 133:0.021459 134:0 135:0 136:-3.491164 137:1.186574 138:-1.103568 139:3.5958719 140:2.343365 141:4.7770991 142:0.943187 143:1.168201 144:-0.040600002 145:1.175315 146:1.391314 147:-0.060185999 148:0.018883999 149:0 150:0 #</p>

<p>ç°åœ¨æŠŠè¿™äº›ç³»æ•°è½¬ä¸ºCè¯­è¨€èƒ½å¤„ç†çš„æ•°ç»„å½¢å¼ï¼Œé‡‡ç”¨pythonè¿›è¡Œå¤„ç†ã€‚</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc">    <span class="cp">#! /usr/bin/python 
</span>    <span class="cp"># -*- coding: utf8 -*- 
</span>    <span class="n">f</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="s">"model"</span><span class="p">)</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="s">"coff.txt"</span><span class="p">,</span><span class="sc">'w'</span><span class="p">)</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">()</span>
    <span class="n">f</span><span class="p">.</span><span class="n">close</span>
    
    <span class="n">l_list</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">11</span><span class="o">:</span><span class="p">]</span>  <span class="err">#ä»ç¬¬</span><span class="mi">12</span><span class="err">è¡Œå¼€å§‹</span>
    <span class="k">for</span> <span class="n">l</span> <span class="k">in</span> <span class="n">l_list</span><span class="o">:</span>
    	    <span class="k">for</span> <span class="n">ele</span> <span class="k">in</span> <span class="n">l</span><span class="p">.</span><span class="n">strip</span><span class="p">().</span><span class="n">split</span><span class="p">(</span><span class="sc">' '</span><span class="p">)</span><span class="o">:</span>
		    <span class="k">if</span> <span class="sc">':'</span> <span class="k">in</span> <span class="n">ele</span><span class="o">:</span>
			    <span class="n">kv</span><span class="o">=</span><span class="n">ele</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="sc">':'</span><span class="p">)</span>
		            <span class="n">k</span><span class="o">=</span><span class="n">kv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
			    <span class="n">v</span><span class="o">=</span><span class="n">kv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
			    <span class="n">out</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="sc">','</span><span class="p">)</span></code></pre></figure>

<p>å¤„ç†åçš„æ•°æ®æ ¼å¼å°±æ˜¯</p>

<p>-2.6072149,-0.386718,-4.7835841,1.24163,-2.846272,2.602037,-2.354259,2.0891199,
0.71786201,-0.762326,0.94002402,-0.43815601,0.013226,0,0,-4.1096439,-1.669122,
-4.8028402,3.3105819,0.51009297,4.9304528,-4.73594,0.34844199,1.549247,0.031539001,
2.0623391,-0.066358998,0.015391,0,0,-5.746675,-0.237827,0.197589,4.5699081,0.0037120001,
2.6799929,-3.70121,-1.757226,-0.72618198,-2.49002,0.69152498,-0.457647,0.032465,0,0,
-6.4179931,-0.69469702,-0.69478399,3.78141,0.31874901</p>

<p>å†™ä¸ºäºŒç»´æ•°ç»„å¯ä»¥è¿™æ ·ï¼Œ</p>

<p>double SVMCoff[M][N]={-2.6072149,-0.386718,-4.7835841,1.24163,-2.846272,2.602037,
-2.354259,2.0891199,0.71786201,-0.762326,0.94002402,-0.43815601,0.013226,0,0,
-4.1096439,-1.669122,-4.8028402,3.3105819,0.51009297,4.9304528,-4.73594,0.34844199,
1.549247,0.031539001,2.0623391,-0.066358998,0.015391,0,0,-5.746675,-0.237827,0.197589,
4.5699081,0.0037120001,2.6799929,-3.70121,-1.757226,-0.72618198,-2.49002,0.69152498,
-0.457647,0.032465,0,0,-6.4179931,-0.69469702,-0.69478399,3.78141,0.31874901}ï¼›</p>

<hr />
<h2 id="ç”¨matlabè§£ææ¨¡å‹æ–‡ä»¶">ç”¨Matlabè§£ææ¨¡å‹æ–‡ä»¶</h2>
<p>å®é™…ä¸Šï¼Œä¸Šé¢ç”¨pythonè¯»å–æ¨¡å‹æ–‡ä»¶ä¸­çš„æ•°æ®è½¬ä¸ºäºŒç»´æ•°ç»„æ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚è®°åœ¨è¿™é‡Œä½œä¸ºä¸€ç§æ–¹æ³•ç§¯ç´¯ã€‚å› ä¸ºåœ¨å‰é¢çš„æ—¶å€™è¿˜ä¸çŸ¥é“æ¨¡å‹é‡Œé¢é‚£ä¹ˆå¤šçš„æ”¯æŒå‘é‡åˆ°åº•åº”è¯¥æ€ä¹ˆè¿›è¡Œåº”ç”¨ï¼Œç›´åˆ°æˆ‘å¼€å¯äº†Matlab.</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc">    <span class="n">clear</span> <span class="n">all</span>
    <span class="n">modelfl</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="err">'</span><span class="n">Model_LightTrain_150d_1</span><span class="sc">','</span><span class="n">r</span><span class="err">'</span><span class="p">);</span>
    <span class="n">version_buffer</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">modelfl</span><span class="p">,</span><span class="err">'</span><span class="n">SVM</span><span class="k">-</span><span class="n">light</span> <span class="n">Version</span> <span class="o">%</span><span class="n">s</span><span class="err">\</span><span class="n">n</span><span class="err">'</span><span class="p">);</span>
    <span class="n">kernel_type</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">modelfl</span><span class="p">,</span><span class="err">'</span><span class="o">%</span><span class="n">d</span> <span class="err">#</span> <span class="n">kernel</span> <span class="n">type</span><span class="err">\</span><span class="n">n</span><span class="err">'</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">poly_degree</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">modelfl</span><span class="p">,</span><span class="err">'</span><span class="o">%</span><span class="n">d</span> <span class="err">#</span> <span class="n">kernel</span> <span class="n">parameter</span> <span class="k">-</span><span class="n">d</span> <span class="err">\</span><span class="n">n</span><span class="err">'</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">rbf_gamma</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">modelfl</span><span class="p">,</span><span class="err">'</span><span class="o">%</span><span class="n">f</span> <span class="err">#</span> <span class="n">kernel</span> <span class="n">parameter</span> <span class="k">-</span><span class="n">g</span> <span class="err">\</span><span class="n">n</span><span class="err">'</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">coef_lin</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">modelfl</span><span class="p">,</span><span class="err">'</span><span class="o">%</span><span class="n">f</span> <span class="err">#</span> <span class="n">kernel</span> <span class="n">parameter</span> <span class="k">-</span><span class="n">s</span> <span class="err">\</span><span class="n">n</span><span class="err">'</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">coef_const</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">modelfl</span><span class="p">,</span><span class="err">'</span><span class="o">%</span><span class="n">f</span> <span class="err">#</span> <span class="n">kernel</span> <span class="n">parameter</span> <span class="k">-</span><span class="n">r</span> <span class="err">\</span><span class="n">n</span><span class="err">'</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">parm_custom</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">modelfl</span><span class="p">,</span><span class="err">'</span><span class="o">%</span><span class="n">s</span> <span class="n">kernel</span> <span class="n">parameter</span> <span class="k">-</span><span class="n">u</span> <span class="err">\</span><span class="n">n</span><span class="err">'</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">total_words</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">modelfl</span><span class="p">,</span><span class="err">'</span><span class="o">%</span><span class="n">d</span> <span class="err">#</span> <span class="n">highest</span> <span class="n">feature</span> <span class="n">index</span> <span class="err">\</span><span class="n">n</span><span class="err">'</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">total_doc</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">modelfl</span><span class="p">,</span><span class="err">'</span><span class="o">%</span><span class="n">d</span> <span class="err">#</span> <span class="n">number</span> <span class="n">of</span> <span class="n">training</span> <span class="n">documents</span> <span class="err">\</span><span class="n">n</span><span class="err">'</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">sv_num</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">modelfl</span><span class="p">,</span><span class="err">'</span><span class="o">%</span><span class="n">d</span> <span class="err">#</span> <span class="n">number</span> <span class="n">of</span> <span class="n">support</span> <span class="n">vectors</span> <span class="n">plus</span> <span class="mi">1</span> <span class="err">\</span><span class="n">n</span><span class="err">'</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">thresh_b</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">modelfl</span><span class="p">,</span><span class="err">'</span><span class="o">%</span><span class="n">f</span> <span class="err">#</span> <span class="n">threshold</span> <span class="n">b</span><span class="p">,</span> <span class="n">each</span> <span class="n">following</span> <span class="n">line</span> <span class="n">is</span> <span class="n">a</span> <span class="nf">SV</span> <span class="p">(</span><span class="n">starting</span> <span class="n">with</span> <span class="n">alpha</span><span class="o">*</span><span class="n">y</span><span class="p">)</span><span class="err">\</span><span class="n">n</span><span class="err">'</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">sv_num</span> <span class="o">=</span> <span class="n">sv_num</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="n">sv_num</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">weight_sv</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="n">sv_num</span><span class="p">,</span> <span class="n">total_words</span><span class="p">);</span>
    <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="o">:</span><span class="n">sv_num</span>
        <span class="nf">alpha</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">modelfl</span><span class="p">,</span><span class="err">'</span><span class="o">%</span><span class="n">f</span> <span class="err">'</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">for</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="o">:</span><span class="n">total_words</span><span class="o">-</span><span class="mi">1</span>
            <span class="n">str_format</span> <span class="o">=</span> <span class="n">sprintf</span><span class="p">(</span><span class="err">'</span><span class="o">%</span><span class="n">d</span><span class="o">:%%</span><span class="n">f</span> <span class="err">'</span><span class="p">,</span><span class="n">k</span><span class="p">);</span>
            <span class="n">weight_sv</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">k</span><span class="p">)</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">modelfl</span><span class="p">,</span><span class="n">str_format</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">end</span>
        <span class="n">str_format</span> <span class="o">=</span> <span class="n">sprintf</span><span class="p">(</span><span class="err">'</span><span class="o">%</span><span class="n">d</span><span class="o">:%%</span><span class="n">f</span> <span class="err">#\</span><span class="n">n</span><span class="err">'</span><span class="p">,</span><span class="n">total_words</span><span class="p">);</span>
        <span class="n">weight_sv</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">total_words</span><span class="p">)</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">modelfl</span><span class="p">,</span><span class="n">str_format</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">end</span>
    <span class="nf">fclose</span><span class="p">(</span><span class="n">modelfl</span><span class="p">);</span><span class="o">%</span> <span class="n">Linear</span> <span class="n">Weight</span> <span class="n">Support</span> <span class="n">Vectors</span>
    <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="o">:</span><span class="n">sv_num</span>
        <span class="k">for</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="o">:</span><span class="n">total_words</span>
            <span class="nf">weight_sv</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">k</span><span class="p">)</span> <span class="o">=</span> <span class="n">alpha</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">*</span><span class="n">weight_sv</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">k</span><span class="p">);</span>
    <span class="n">end</span>
    <span class="n">end</span>
    <span class="n">lin_weight</span> <span class="o">=</span> <span class="n">sum</span><span class="p">(</span><span class="n">weight_sv</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>

    <span class="o">%</span> <span class="n">verify</span> <span class="n">the</span> <span class="n">output</span>
    <span class="n">modelf2</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="err">'</span><span class="n">LightTest_150d</span><span class="p">.</span><span class="n">txt</span><span class="sc">','</span><span class="n">r</span><span class="err">'</span><span class="p">);</span>
    <span class="n">sv_num</span><span class="o">=</span><span class="mi">10</span><span class="p">;</span>
    <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="o">:</span><span class="n">sv_num</span>
        <span class="nf">alpha2</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">modelf2</span><span class="p">,</span><span class="err">'</span><span class="o">+%</span><span class="n">d</span> <span class="err">'</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">for</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="o">:</span><span class="mi">150</span>
            <span class="n">str_format2</span> <span class="o">=</span> <span class="n">sprintf</span><span class="p">(</span><span class="err">'</span><span class="o">%</span><span class="n">d</span><span class="o">:%%</span><span class="n">f</span> <span class="err">'</span><span class="p">,</span><span class="n">k</span><span class="p">);</span>
            <span class="n">weight_sv2</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">k</span><span class="p">)</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">modelf2</span><span class="p">,</span><span class="n">str_format2</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">end</span>
    <span class="n">end</span>
    <span class="nf">fclose</span><span class="p">(</span><span class="n">modelfl</span><span class="p">);</span><span class="o">%</span> <span class="n">Linear</span> <span class="n">Weight</span> <span class="n">Support</span> <span class="n">Vectors</span>

    <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span>
        <span class="n">out</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="o">:</span><span class="p">)</span><span class="o">=</span><span class="n">weight_sv2</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="o">:</span><span class="p">).</span><span class="o">*</span><span class="n">lin_weight</span><span class="p">;</span>
    <span class="n">end</span>
    <span class="n">All</span><span class="o">=</span><span class="n">sum</span><span class="p">(</span><span class="n">out</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
    <span class="n">All</span><span class="o">=</span><span class="n">All</span><span class="k">-</span><span class="n">thresh_b</span><span class="p">;</span></code></pre></figure>

<p>åé¢ä¸€æ®µä»£ç verify the outputæ˜¯ä»æµ‹è¯•é›†é‡Œå–10ä¸ªæ•°æ®å’Œsvm_classifyç”Ÿæˆçš„ç»“æœå¯¹æ¯”æ¥éªŒè¯ä»¥ä¸Šç®—æ³•çš„æ­£ç¡®æ€§ã€‚å®éªŒç»“æœå®Œå…¨ä¸€æ ·ã€‚</p>

<p>é‚£ä¹ˆå°±å¯ä»¥å¾—å‡ºæ¨¡å‹æ–‡ä»¶çš„æ­£ç¡®ç”¨æ³•äº†.</p>

<ul>
  <li>é¦–å…ˆæ˜¯weight_sv(i,k) = alpha(i)*weight_sv(i,k)ï¼Œç”¨æ¯ä¸€ä¸ªæ”¯æŒå‘é‡ä¹˜ä»¥æ¯è¡Œå¼€å¤´çš„alphaè·å¾—æƒé‡ã€‚</li>
  <li>ç„¶ålin_weight = sum(weight_sv,1)ï¼Œæ¯ä¸€åˆ—ç›¸åŠ ã€‚è¿™æ ·ä¸ç®¡æ˜¯å¤šå°‘ä¸ªæ”¯æŒå‘é‡ï¼Œæœ€ç»ˆå¾—åˆ°çš„æ˜¯ä¸€ä¸ª150*1çš„çŸ©é˜µ,å³150ä¸ªç³»æ•°ã€‚</li>
  <li>è¿™150ä¸ªç³»æ•°å’Œä¸€çª—è¯­éŸ³ç®—å‡ºçš„150ä¸ªç‰¹å¾ç‚¹ä¹˜åç´¯åŠ ã€‚</li>
  <li>ç´¯åŠ åçš„å€¼å‡å»thresh_bå’Œ+1 -1ä½œæ¯”è¾ƒå°±å¯ä»¥å¾—å‡ºåˆ¤æ–­æ˜¯å¦æ˜¯è¯­éŸ³æ®µäº†ã€‚</li>
</ul>

<hr />
<h2 id="references">References</h2>

<p>[1].http://www.cs.cornell.edu/People/tj/svm_light/</p>

<p>[2].http://en.wikipedia.org/wiki/Support_vector_machine</p>

<p>[3].http://blog.csdn.net/carpinter/article/details/7375309</p>

:ET