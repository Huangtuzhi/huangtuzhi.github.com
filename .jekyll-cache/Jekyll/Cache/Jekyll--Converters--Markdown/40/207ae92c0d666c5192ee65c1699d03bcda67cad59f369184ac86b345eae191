I"º<p>æœ¬æ–‡å‚è§<a href="http://users.softlab.ece.ntua.gr/~ttsiod/arm.html">Building a tiny ARM-based server</a>ï¼Œæ˜¯ç¿»è¯‘ï¼Œä¹Ÿæ˜¯å­¦ä¹ ã€‚</p>

<p>æˆ‘æ‹†äº†ä¸€ä¸ªæ—§çš„ARMå¼€å‘æ¿ï¼Œå¹¶ç”¨å®ƒåˆ¶ä½œäº†ä¸€ä¸ªåŸºäºDebiançš„miniæœåŠ¡å™¨ã€‚æˆ‘ç°åœ¨æœ‰ä¸€ä¸ªéšæ—¶å¯ä»¥è®¿é—®çš„ç½‘å…³ï¼Œå®ƒï¼š</p>

<ul>
  <li>éå¸¸èŠ‚èƒ½ï¼Œåªæœ‰å¤§çº¦3-3.5W</li>
  <li>æ€»æ˜¯å¯ä»¥è®¿é—®çš„ï¼Œå³ä½¿æˆ‘ç”¨çš„åŠ¨æ€IP (via DynDNS)</li>
  <li>æœ‰ä¸€ä¸ªNginxç½‘ç»œæœåŠ¡å™¨ï¼Œæ‰€ä»¥æˆ‘èƒ½å’Œä¸–ç•Œåˆ†äº«æˆ‘çš„ç”Ÿæ´»ã€‚(Nginxæ˜¯ä¸€æ¬¾é¢å‘æ€§èƒ½è®¾è®¡çš„HTTPæœåŠ¡å™¨ï¼Œç›¸è¾ƒäºApacheã€lighttpdå…·æœ‰å æœ‰å†…å­˜å°‘ï¼Œç¨³å®šæ€§é«˜ç­‰ä¼˜åŠ¿ã€‚ï¼‰</li>
  <li>æœ‰ä¸€ä¸ªEximé‚®ä»¶æœåŠ¡å™¨ï¼Œæ‰€ä»¥æˆ‘èƒ½é€šè¿‡SMTPæ¥å—Emailå¹¶æŠŠå®ƒå­˜åœ¨æˆ‘çš„æˆ¿å­é‡Œã€‚æˆ‘é€šè¿‡SSH/mytté˜…è¯»é‚®ä»¶ã€‚</li>
  <li>èƒ½å¤Ÿé€šè¿‡SSHè¿œç¨‹è¿æ¥ï¼Œå…è®¸è¿œç¨‹å”¤é†’æˆ‘çš„ä¸»æ¡Œé¢ã€‚</li>
  <li>åœ¨åå°è¿›è¡Œä¸‹è½½ï¼ˆwget/rtorrent) ï¼Œç”¨SambaæœåŠ¡å™¨å…±äº«è‡³ç»‘å®šè®¾å¤‡ï¼Œå¦‚Andriodå¹³æ¿</li>
  <li>SSHç«¯å£å¤ç”¨ä¸ºHTTPSç«¯å£æ¥æ»¤é™¤ä¸€äº›é˜²ç«å¢™é™åˆ¶ã€‚</li>
</ul>

<p>è¿™ä¸ªæ˜¯æˆ‘æœ€å¥½çš„ä½œå“ã€‚æˆ‘å–œæ¬¢å»ºé€ å®ƒçš„è¿‡ç¨‹ã€‚</p>

<hr />
<h2 id="building-a-tiny-arm-based-server">Building a tiny ARM-based server</h2>

<p>å¤§çº¦ä¸€å¹´å‰ï¼Œæˆ‘æ‹¿åˆ°äº†ä¸€ä¸ªNASè®¾å¤‡â€”â€”è¿™æ˜¯ä¸€ä¸ªç›¸å½“å¤è€ä½è€—èƒ½åŸºäºARMçš„æ–‡ä»¶æœåŠ¡å™¨ã€‚æŒ‰ç…§ç°ä»£çš„æ ‡å‡†ï¼Œå®ƒè¢«è®¤ä¸ºè¿‡æ—¶ã€‚ç„¶è€Œæˆ‘çŸ¥é“ä»æˆ‘è·å¾—å®ƒçš„é‚£ä¸€å¤©æˆ‘ä¼šéå¸¸äº«å—æ”¹é€ å®ƒã€‚</p>

<p>æˆ‘çš„èŒä¸šæ˜¯ä¸€ä¸ªç¨‹åºå‘˜ã€‚æˆ‘è¯šæ³è®¤ä¸ºç¼–ç¨‹å’Œç”Ÿæ´»æ˜¯åˆ†å¼€çš„ï¼Œå¯ä»¥æœ‰è¿™æ ·ä¸€ç§å¯èƒ½å®ƒä»¬éƒ½èƒ½è¢«æé«˜ã€‚</p>

<hr />
<h2 id="disassembling-and-soldering">Disassembling and soldering</h2>

<p>é¦–å…ˆæˆ‘å¿…é¡»æŠŠæ•´ä¸ªä¸œè¥¿æ‹†å¼€ï¼Œè¿™æ ·æˆ‘æ‰èƒ½æŒ‰ç…§æˆ‘çš„æƒ³æ³•å»æ­å»ºè¿™ä¸ªä¸–ç•Œã€‚æŒ‰ç…§å…¶ä»–å·¥ç¨‹å¸ˆçš„æŒ‡å¯¼ï¼Œæˆ‘è¶³è¶³æ‹†äº†åŠä¸ªå°æ—¶æ‰æ‹†å¼€å®ƒã€‚æˆ‘æŠŠæœºå™¨é‡Œé¢çš„ä¸¤ä¸ªå…‰é©±æ‹†å‡ºæ¥ï¼Œè¿æ¥åˆ°æˆ‘çš„å¤–éƒ¨USB/SATAé™„ä»¶ã€‚è¿…é€Ÿåœ°æ£€æµ‹äº†ä¸€ä¸‹å®ƒçš„åŠŸèƒ½ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>smartctl -a /dev/sdX 
</code></pre></div></div>

<p>è¿™ä¸ªå‘½ä»¤æ˜¾ç¤ºä¸¤ä¸ªå…‰é©±éƒ½æœ‰åçš„æ‰‡åŒºã€‚
æˆ‘æ‰¾åˆ°ä¸€ä¸ª160GBçš„USBç§»åŠ¨ç¡¬ç›˜æŒ‚åœ¨ä¸Šé¢ã€‚ç”±äºè¿™æ˜¯ä¸€ä¸ªåµŒå…¥å¼è®¾å¤‡ï¼Œæ²¡æœ‰VGAè¾“å‡ºï¼Œä¹Ÿæ²¡æœ‰ä¸²å£è¾“å…¥ã€‚æˆ‘éœ€è¦æ‰¾åˆ°ä¸€ç§ç›‘è§†å®ƒå¯åŠ¨è¿‡ç¨‹çš„æ–¹æ³•ã€‚æˆ‘googleäº†å¾ˆä¹…ï¼Œè¿™ä¸ªæœºå™¨ä¸Šé¢å®é™…æœ‰RS232çš„æ‚ç›˜ã€‚ä¸‡èƒ½çš„äº’è”ç½‘æä¾›çš„æ–¹æ³•è¯´æ˜éå¸¸ç®€å•ï¼š</p>

<p>Pin 1 = +3.3V</p>

<p>Pin 2 = GND</p>

<p>Pin 3 = Rx</p>

<p>Pin 4 = Tx
æˆ‘å·²ç¶“è¿‡äº†ç”¨é¢åŒ…ç‰ˆæ­å»ºRS232æ¥å£çš„å¹´çºªï¼Œæˆ‘åœ¨ç½‘ä¸Šä»ä¸€å®¶ç”µå­å•†åŸè®¢è´­äº†ä¸€æ ¹TTLè½¬RS232ç”µç¼†ã€‚</p>

<p><img src="http://static.oschina.net/uploads/space/2014/0313/210042_mwwi_1420197.jpg" alt="åœ¨æ­¤è¾“å…¥å›¾ç‰‡æè¿°" /></p>

<p>ä¸Šå›¾çº¢ç®­å¤´æ‰€æŒ‡çš„å°±æ˜¯æˆ‘ç„Šæ¥ä¸Šå»çš„ä¸²å£çº¿ã€‚ä¸¤å¤©åï¼Œæˆ‘åˆè¿æ¥äº†ä¸€æ ¹ä¸²å£è½¬USBçš„ç”µç¼†ã€‚æˆ‘çš„ç”µè„‘æ˜¯ArchLinuxï¼ŒAtom 330 ã€‚æˆ‘æŠŠUSBæ’å…¥ç”µè„‘ï¼Œæ‰“å¼€ä¸²å£è°ƒè¯•ç¨‹åºï¼Œè¿™æ ·å°±èƒ½æ§åˆ¶è¿™ä¸ªæ¿å­äº†ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;!-- lang: shell --&gt;
minicom -D /dev/ttyUSB0 -b 115200
</code></pre></div></div>

<hr />
<h2 id="u-booting-from-no-bios-whatsoever">U-booting from no BIOS whatsoever</h2>

<p>ä¸‹é¢è®²çš„å°±æ˜¯æ€ä¹ˆå¯¹160Gçš„ç¡¬ç›˜åˆ†åŒºï¼Œç„¶åå¯åŠ¨å†…æ ¸ã€‚</p>

<blockquote>
  <p>I mounted the old drives up to my main PCâ€™s USB/SATA enclosure, and sure enough, I saw clear signs of a Linux-based machine: the software RAID driver in my ArchLinux detected raid devices (cat /proc/mdstat showed information about the RAID structure ç£ç›˜å†—ä½™é˜µåˆ—). Apparently, MyBook had the two drives in a RAID formation - which I proceeded to successfully mount. There were 4 partitions in each of the two drives, clearly in a RAID1 mirror formation - with the 4th and final partition being the one with the â€œFile Serverâ€ storage area.
I proceeded to copy the first three partitions (including the partition table) to my 160GB drive (via dd). I then used fdisk to fix the size of the 4th partition to be the remaining space of my drive.</p>
</blockquote>

<hr />
<h2 id="installing-debian-and-some-thoughts-about-windows">Installing Debian (and some thoughts about Windows)</h2>

<p>è¿™ä¸€æ®µä¸»è¦æ˜¯è®²å¦‚ä½•å®‰è£…Debianæ“ä½œç³»ç»Ÿï¼Œå’Œæ€ä¹ˆçœ‹å¾…linuxå’Œwindowsçš„å·®åˆ«ã€‚</p>

<blockquote>
  <p>Sadly, this is a skill that Microsoft all but destroyed, making people hopelessly dependent on â€œwizardsâ€. That, in itself would have been fine, if it were not for the inevitable side-effect: people clicking on buttons unaware of what is going on behind them, end up with systems that can only be rescued with â€œOS reinstallsâ€. My own settings - since I work with UNIX systems - are simple files under /etc and my $HOMEâ€¦ and have always been living under revision control (e.g my main dot files and vim configuration), happily migrating over the last 15 years across many machines. Backing them up and restoring them</p>
</blockquote>

<p>æ¥ä¸‹æ¥ä½œè€…è®²è¿°å¦‚ä½•è§£å†³æœåŠ¡æä¾›å•†IPå˜åŠ¨çš„é—®é¢˜ï¼Œä¸»è¦æ˜¯ä½¿ç”¨cronå®šæ—¶å·¥å…·è®©ä¸€ä¸ª DynDNS ç¨‹åºè‡ªå¯åŠ¨ï¼Œè¿™ä¸ªDynDNSå¯ä»¥æ˜ å°„ä¸€ä¸ªå›ºå®šIPåœ°å€ã€‚è¿™æ ·å°±å¯ä»¥åœ¨å¤–é¢ç¨³å®šåœ°è®¿é—®äº†ã€‚è´´ä»£ç ã€‚</p>

<p>ä¸‹è½½</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> &lt;!-- lang: shell --&gt;
# apt-get install gcc
...
# wget http://inatech.eu/inadyn/inadyn.v1.96.2.zip
# unzip inadyn.v1.96.2.zip
# cd inadyn
# make
...
# cp bin/linux/inadyn /usr/local/bin
</code></pre></div></div>

<p>è‡ªå¯åŠ¨</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;!-- lang: shell --&gt;
# cat /var/spool/cron/crontabs/root 
...
@reboot /usr/local/bin/inadyn
</code></pre></div></div>

<p>ç„¶åä½œè€…è®²è¿°æ€ä¹ˆå®‰è£…é‚®ä»¶æœåŠ¡å™¨Eximï¼Œç½‘ç»œæœåŠ¡å™¨Nginx</p>

<hr />
<h2 id="conclusion---unix-glory">Conclusion - UNIX glory</h2>

<blockquote>
  <p>In plain words, UNIX power put to use - in the tiny server, in my phone, in my tablet. All 3 of them, running on ARM processors. To be honest, I didnâ€™t expect that ; 15 years ago I was sure that Intel and MS had cornered the galaxyâ€¦ but somehow, Linux managed to change all that.</p>
</blockquote>

<p>æˆ‘ä»ç„¶å¾—å¯¹ä»–ä»¬è¿›è¡Œè¶Šç‹±æˆ–è€…ç ´è§£æ¥å®ç°æˆ‘çš„æƒ³æ³•â€”â€”å› ä¸ºè¿™ä¸ªä¸–ç•Œè¿˜ä¸å®Œç¾ã€‚</p>

<p>ä½†æ˜¯è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ªä¸–ç•Œæœ‰æ„æ€çš„åŸå›  :â€‘)</p>

:ET