I"Ä~<p>Huffmanç¼–ç æ˜¯ä¸€ç§æ— æŸçš„æ•°æ®å‹ç¼©ç†µç¼–ç ã€‚ç¼–ç è¿‡ç¨‹å¯ä»¥é€šè¿‡æ„é€ HuffmanäºŒå‰æ ‘æ¥è¿›è¡Œã€‚ç®—æ³•è¿‡ç¨‹å’Œè¯æ˜å¯ä»¥å‚è§Introduction to Algorithms Page245~249ã€‚</p>

<hr />
<p>##ä¸¾ä¸ªæ —å­
å‡è®¾ä¹¦ ã€ŠSteven Jobsã€‹ ä¸­æ‰€æœ‰çš„äººåéƒ½ç”¨ä¸€ä¸ªcharå‹æ¥å­˜å‚¨ï¼Œæ¯”å¦‚Jobsç¼–ç ä¸º1111 1111ï¼ŒJonathan  Iveï¼ˆæ›¾è®¾è®¡é”¤å­æ‰‹æœºå¤–è§‚ï¼‰ç¼–ç ä¸º0000 0000ã€‚Jobsåœ¨ä¹¦ä¸­å‡ºç°æ¦‚ç‡ä¸º20%ï¼Œè€ŒIveåªæœ‰5%ã€‚é‚£ä¹ˆæŸä¸€æ®µè¯å¯ä»¥è¡¨ç¤ºä¸º11111111xxxxxxxx00000000(Xä¸ºå…¶ä»–å­—ï¼Œæ¯”å¦‚loveï¼Œemployçš„ç¼–ç ï¼‰ã€‚å®é™…ä¸Šæˆ‘ä»¬æ²¡æœ‰å¿…è¦æŠŠåå­—éƒ½ç¼–ç ä¸ºå®šé•¿ã€‚åœ¨ä¸€ç« æ–‡å­—ä¸­å‡ºç°æ¦‚ç‡è¶Šå¤šçš„åå­—ï¼Œæˆ‘ä»¬å°†å®ƒç¼–ç ä¸ºè¾ƒå°çš„é•¿åº¦ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœç©ºé—´ã€‚è‡³äºèƒ½å°åˆ°å¤šå°‘ï¼Œè¿™å°±å’Œæ¦‚ç‡æœ‰å…³ï¼Œå¿…é¡»åšåˆ°ä¸èƒ½æŸå¤±ä¿¡æ¯é‡ã€‚è¿™å°±å¯ä»¥ç”¨Huffmanæ ‘æ¥å®ç°ã€‚</p>

<p>å®ç°è¿‡ç¨‹ä¸­é‡åˆ°æœ‰è¿™äº›é—®é¢˜ï¼š</p>

<ul>
  <li>å¦‚ä½•å»ºç«‹é“¾è¡¨å’ŒäºŒå‰æ ‘</li>
  <li>å•é“¾è¡¨é€‰æ‹©æ’åº</li>
  <li>å¦‚ä½•éå†è¾“å‡ºå¶å­èŠ‚ç‚¹åŠè·¯å¾„ï¼ˆå› ä¸ºè·¯å¾„ä»£è¡¨çš„å°±æ˜¯ç¼–ç ï¼‰</li>
</ul>

<hr />
<h2 id="ç¨‹åºç»“æ„">ç¨‹åºç»“æ„</h2>
<p>é‡‡ç”¨æ¨¡å—åŒ–ç¼–ç¨‹çš„æ€è·¯</p>

<p>InputNodes() å‡½æ•°ç”¨æ¥è¾“å…¥èŠ‚ç‚¹æƒé‡å’Œå»ºç«‹é“¾è¡¨</p>

<p>MakeQueue() å‡½æ•°ç”¨æ¥å¯¹é“¾è¡¨è¿›è¡Œé€‰æ‹©æ’åº</p>

<p>HuffmanForest()å‡½æ•°ç”¨æ¥æ„å»ºå“ˆå¼—æ›¼äºŒå‰æ ‘</p>

<p>PreOrder() å‡½æ•°ç”¨æ¥éå†è¾“å‡ºHuffmanç¼–ç ï¼Œç”¨äº†ä¸€ä¸ªé€’å½’è°ƒç”¨</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="cp">#include &lt;stdio.h&gt;
#include &lt;math.h&gt;
#include &lt;unistd.h&gt;
#include &lt;malloc.h&gt;
</span><span class="k">typedef</span> <span class="k">struct</span> <span class="n">node</span>
<span class="p">{</span>
	<span class="kt">float</span> <span class="n">weight</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">node</span> <span class="o">*</span><span class="n">Lnode</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">node</span> <span class="o">*</span><span class="n">Rnode</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">node</span> <span class="o">*</span><span class="n">Parent</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">node</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
<span class="p">}</span><span class="n">HuffmanNode</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">NodeNum</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>      <span class="c1">//èŠ‚ç‚¹ä¸ªæ•°</span>
<span class="n">HuffmanNode</span> <span class="o">*</span> <span class="nf">InputNodes</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">float</span> <span class="n">w</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"Input the size of nodes</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
	<span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">NodeNum</span><span class="p">);</span>
    <span class="n">HuffmanNode</span> <span class="o">*</span><span class="n">Leaves</span><span class="p">;</span><span class="c1">//å®šä¹‰æŒ‡å‘ç»“æ„ä½“ç¼“å­˜åŒºçš„æŒ‡é’ˆ,è¢«è¿”å›äº†ã€‚æ‰€ä»¥æ˜¯å±€éƒ¨å˜é‡ä¹Ÿæ²¡å…³ç³»ã€‚</span>
	<span class="n">Leaves</span><span class="o">=</span><span class="p">(</span><span class="n">HuffmanNode</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">HuffmanNode</span><span class="p">)</span><span class="o">*</span><span class="n">NodeNum</span><span class="p">);</span><span class="c1">//ç”³è¯·å­˜æ”¾èŠ‚ç‚¹çš„å…¨å±€ç©ºé—´ï¼Œä»€ä¹ˆæ—¶å€™è¢«é‡Šæ”¾ï¼Ÿ</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"Please input the weight of nodes to perform Lossless Compression </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
	<span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">NodeNum</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
        <span class="n">scanf</span><span class="p">(</span><span class="s">"%f"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">w</span><span class="p">);</span>
		<span class="n">Leaves</span><span class="p">[</span><span class="nf">i</span><span class="p">].</span><span class="n">weight</span><span class="o">=</span><span class="n">w</span><span class="p">;</span>
		<span class="n">Leaves</span><span class="p">[</span><span class="nf">i</span><span class="p">].</span><span class="n">Lnode</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
		<span class="n">Leaves</span><span class="p">[</span><span class="nf">i</span><span class="p">].</span><span class="n">Rnode</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">NodeNum</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">Leaves</span><span class="p">[</span><span class="nf">i</span><span class="p">].</span><span class="n">next</span><span class="o">=&amp;</span><span class="n">Leaves</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span><span class="c1">//è¿™é‡Œçš„è¡¨è¾¾çœŸå¥‡è‘©</span>
	<span class="p">}</span>
	<span class="n">Leaves</span><span class="p">[</span><span class="n">NodeNum</span><span class="o">-</span><span class="mi">1</span><span class="p">].</span><span class="n">next</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">Leaves</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">HuffmanNode</span><span class="o">*</span> <span class="nf">MakeQueue</span><span class="p">(</span><span class="n">HuffmanNode</span> <span class="o">*</span><span class="n">innode</span><span class="p">)</span><span class="c1">//å½¢æˆé˜Ÿåˆ— æ’åºç®—æ³•æœ‰é—®é¢˜,ä¸åº”è¯¥æ˜¯ç®€å•æ¢weightï¼Œè€Œæ˜¯é“¾è¡¨çš„æ’å…¥æ“ä½œ</span>
<span class="p">{</span>
	<span class="n">HuffmanNode</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="o">*</span><span class="n">p_follow</span><span class="p">,</span> <span class="o">*</span><span class="n">q_follow</span><span class="p">,</span> <span class="o">*</span><span class="n">q</span><span class="p">,</span> <span class="o">*</span><span class="n">temp</span><span class="p">;</span>
	<span class="n">p_follow</span><span class="o">=</span><span class="n">p</span><span class="p">;</span><span class="c1">//pè·ŸéšæŒ‡é’ˆåˆå§‹åŒ–</span>
	<span class="k">for</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="n">innode</span><span class="p">;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">!=</span><span class="nb">NULL</span><span class="p">;</span><span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">==</span><span class="n">innode</span> <span class="o">&amp;&amp;</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">!=</span><span class="nb">NULL</span><span class="p">)</span><span class="c1">//å½“pæ˜¯å¤´èŠ‚ç‚¹,ä¸”æœ‰&gt;=3ä¸ªèŠ‚ç‚¹ã€‚</span>
		<span class="p">{</span>
			<span class="n">q_follow</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
			<span class="k">for</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span><span class="n">q</span><span class="o">!=</span><span class="nb">NULL</span><span class="p">;)</span><span class="c1">//å°å¿ƒqæº¢å‡º</span>
			<span class="p">{</span>
				<span class="k">if</span><span class="p">(</span><span class="n">q_follow</span><span class="o">==</span><span class="n">p</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">weight</span> <span class="o">&gt;</span> <span class="n">q</span><span class="o">-&gt;</span><span class="n">weight</span><span class="p">)</span>
					<span class="p">{</span>
						<span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
						<span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
						<span class="n">temp</span><span class="o">=</span><span class="n">q</span><span class="p">;</span>
						<span class="n">q</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
						<span class="n">p</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
					<span class="c1">//	printf("case:pæ˜¯å¤´èŠ‚ç‚¹ï¼Œpå’Œqç›¸é‚»\n");</span>
				   	<span class="p">}</span>
					<span class="n">innode</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
					<span class="n">q_follow</span><span class="o">=</span><span class="n">q</span><span class="p">;</span>
					<span class="n">q</span><span class="o">=</span><span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="k">else</span>
				<span class="p">{</span>
					<span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">weight</span> <span class="o">&gt;</span> <span class="n">q</span><span class="o">-&gt;</span><span class="n">weight</span><span class="p">)</span>
				   	<span class="p">{</span>
						<span class="n">temp</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span><span class="c1">//é˜²æ­¢pçš„æŒ‡é’ˆå‘ç”Ÿæ”¹å˜</span>
						<span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
						<span class="n">q_follow</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
						<span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>

						<span class="n">temp</span><span class="o">=</span><span class="n">q</span><span class="p">;</span>
						<span class="n">q</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
						<span class="n">p</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
						<span class="n">innode</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
					<span class="c1">//	printf("case:pæ˜¯å¤´èŠ‚ç‚¹ï¼Œpå’Œqè‡³å°‘ç›¸é‚»1ä¸ª,äº¤æ¢å®Œæ¯•\n");</span>
					<span class="p">}</span>
				
					<span class="k">if</span><span class="p">(</span><span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">==</span><span class="nb">NULL</span><span class="p">)</span>
					<span class="p">{</span>
					<span class="c1">//	printf("qçš„ä¸‹ä¸€ä¸ªä¸ºç©ºï¼Œç¨‹åºä¸­æ­¢\n");</span>
						<span class="k">break</span><span class="p">;</span>
					<span class="p">}</span>
					<span class="k">else</span>
					<span class="p">{</span>
						<span class="n">q_follow</span><span class="o">=</span><span class="n">q</span><span class="p">;</span>
						<span class="n">q</span><span class="o">=</span><span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
					<span class="c1">//	printf("case:pæ˜¯å¤´èŠ‚ç‚¹ï¼Œpå’Œqè‡³å°‘ç›¸é‚»ä¸€ä¸ªï¼Œqç§»å‘ä¸‹ä¸€ä¸ª\n");</span>
					<span class="p">}</span>
				<span class="p">}</span>
			 <span class="p">}</span>
			 <span class="n">innode</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
		<span class="p">}</span>
		
		<span class="k">else</span> <span class="k">if</span><span class="p">((</span><span class="n">p</span><span class="o">==</span><span class="n">innode</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">!=</span><span class="nb">NULL</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">==</span><span class="nb">NULL</span><span class="p">))</span><span class="c1">//å½“pæ˜¯å¤´èŠ‚ç‚¹ï¼Œä¸”æœ‰2ä¸ªèŠ‚ç‚¹ã€‚</span>
		<span class="p">{</span>
			<span class="c1">//printf("case:Sorting 2 points\n");</span>
			<span class="n">q</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
			<span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">weight</span> <span class="o">&gt;</span> <span class="n">q</span><span class="o">-&gt;</span><span class="n">weight</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
				<span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
			
				<span class="n">innode</span><span class="o">=</span><span class="n">q</span><span class="p">;</span> 
			<span class="c1">//	printf("Num=2ï¼Œ2ä¸ªèŠ‚ç‚¹äº¤æ¢æˆåŠŸ\n");</span>
				<span class="k">return</span> <span class="n">innode</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">else</span>
			<span class="p">{</span>
			<span class="c1">//	printf("Num=2ï¼Œ2ä¸ªèŠ‚ç‚¹æ’åºæ­£ç¡®ï¼Œä¸ç”¨äº¤æ¢\n");</span>
			<span class="p">}</span>

		<span class="p">}</span>

		<span class="k">else</span> <span class="k">if</span><span class="p">((</span><span class="n">p</span><span class="o">!=</span><span class="n">innode</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">==</span><span class="nb">NULL</span><span class="p">))</span><span class="c1">//å½“pæ˜¯å°¾èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹</span>
		<span class="p">{</span>
	  	   <span class="c1">// printf("pä¸æ˜¯å¤´èŠ‚ç‚¹ï¼Œä¸”pæ˜¯å€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹\n");</span>
			<span class="n">q</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
			<span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">weight</span> <span class="o">&gt;</span> <span class="n">q</span><span class="o">-&gt;</span><span class="n">weight</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
					<span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
					<span class="n">p_follow</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">q</span><span class="p">;</span>
		
		     		<span class="n">temp</span><span class="o">=</span><span class="n">q</span><span class="p">;</span>
		    		<span class="n">q</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
					<span class="n">p</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
				<span class="p">}</span>
		<span class="p">}</span>

		<span class="k">else</span> <span class="c1">//å½“pæ˜¯å…¶å®ƒèŠ‚ç‚¹</span>
		<span class="p">{</span>
		<span class="c1">//	printf("This situation is popular points\n");</span>
			<span class="n">q_follow</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
			<span class="k">for</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span><span class="n">q</span><span class="o">!=</span><span class="nb">NULL</span><span class="p">;</span><span class="n">q</span><span class="o">=</span><span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">if</span><span class="p">(</span><span class="n">q_follow</span><span class="o">==</span><span class="n">p</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">weight</span> <span class="o">&gt;</span> <span class="n">q</span><span class="o">-&gt;</span><span class="n">weight</span><span class="p">)</span>
				   <span class="p">{</span>
					<span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
					<span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
					<span class="n">p_follow</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">q</span><span class="p">;</span>
					
					<span class="n">temp</span><span class="o">=</span><span class="n">q</span><span class="p">;</span>
					<span class="n">q</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
					<span class="n">p</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
				   <span class="p">}</span>
				<span class="p">}</span>
				<span class="k">else</span>
				<span class="p">{</span>
					<span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">weight</span> <span class="o">&gt;</span> <span class="n">q</span><span class="o">-&gt;</span><span class="n">weight</span><span class="p">)</span>
				   <span class="p">{</span>
					<span class="n">temp</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span><span class="c1">//åœ¨é“¾è·¯æ”¹ç‰ˆå‰ä¿å­˜ä¸‹æ¥</span>
					<span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
					<span class="n">q_follow</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
					<span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
					<span class="n">p_follow</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">q</span><span class="p">;</span>
					
					<span class="n">temp</span><span class="o">=</span><span class="n">q</span><span class="p">;</span>
					<span class="n">q</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
					<span class="n">p</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
				   <span class="p">}</span>
				<span class="p">}</span> 
		   <span class="n">q_follow</span><span class="o">=</span><span class="n">q</span><span class="p">;</span>
		   <span class="p">}</span>
		<span class="p">}</span>
		<span class="n">p_follow</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="k">return</span> <span class="n">innode</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">HuffmanNode</span><span class="o">*</span> <span class="nf">HuffmanForest</span><span class="p">(</span><span class="n">HuffmanNode</span> <span class="o">*</span><span class="n">forest</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="n">HuffmanNode</span> <span class="o">*</span><span class="n">current</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
	<span class="n">HuffmanNode</span> <span class="o">*</span><span class="n">NewNode</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
	<span class="n">HuffmanNode</span> <span class="o">*</span><span class="n">Head</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
	<span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">NodeNum</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">printf</span><span class="p">(</span><span class="s">"-----------------------------------------------</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
		<span class="n">printf</span><span class="p">(</span><span class="s">"ç¬¬%dæ¬¡è°ƒç”¨MakeQueueå‡½æ•°å¯¹è¾“å…¥çš„æ ‘è¿›è¡Œæ’åº</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
		<span class="n">Head</span><span class="o">=</span><span class="n">MakeQueue</span><span class="p">(</span><span class="n">forest</span><span class="p">);</span><span class="c1">//èŠ‚ç‚¹ç»„æˆé“¾è¡¨ï¼Œçœ‹æˆä¸€ä¸ªé˜Ÿåˆ— è¿›è¡Œæ’åºã€‚è¿™é‡Œå¿…é¡»ç”¨Headå»æ¥å—è¿”å›å€¼ï¼Œä¸ç„¶å‡ºé”™ã€‚</span>
		<span class="k">for</span><span class="p">(</span><span class="n">current</span><span class="o">=</span><span class="n">Head</span><span class="p">;</span><span class="n">current</span><span class="o">!=</span><span class="nb">NULL</span><span class="p">;</span><span class="n">current</span><span class="o">=</span><span class="n">current</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">printf</span><span class="p">(</span><span class="s">"%f  "</span><span class="p">,</span><span class="n">current</span><span class="o">-&gt;</span><span class="n">weight</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
		
	
		<span class="n">NewNode</span><span class="o">=</span><span class="p">(</span><span class="n">HuffmanNode</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">HuffmanNode</span><span class="p">));</span>
		<span class="n">NewNode</span><span class="o">-&gt;</span><span class="n">weight</span><span class="o">=</span><span class="p">(</span><span class="n">Head</span><span class="o">-&gt;</span><span class="n">weight</span><span class="p">)</span><span class="o">+</span><span class="p">((</span><span class="n">Head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">weight</span><span class="p">);</span><span class="c1">//è¿™é‡Œçš„èŠ‚ç‚¹ä¸èƒ½å†™ä½œforestï¼Œå¿…é¡»å†™ä½œHeadã€‚</span>
		<span class="n">NewNode</span><span class="o">-&gt;</span><span class="n">Lnode</span> <span class="o">=</span><span class="n">Head</span><span class="p">;</span>
		<span class="n">NewNode</span><span class="o">-&gt;</span><span class="n">Rnode</span> <span class="o">=</span><span class="n">Head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
		<span class="n">Head</span><span class="o">-&gt;</span><span class="n">Parent</span><span class="o">=</span><span class="n">Head</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">Parent</span><span class="o">=</span><span class="n">NewNode</span><span class="p">;</span>
		
	    
		<span class="k">for</span><span class="p">(</span><span class="n">current</span><span class="o">=</span><span class="n">Head</span><span class="p">;</span><span class="n">current</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">;</span><span class="n">current</span><span class="o">=</span><span class="n">current</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">){}</span>
		<span class="n">current</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">NewNode</span><span class="p">;</span>   <span class="c1">//åŠ å…¥æ–°èŠ‚ç‚¹</span>
		<span class="n">NewNode</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
		<span class="n">Head</span><span class="o">=</span><span class="p">(</span><span class="n">Head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span><span class="c1">//åˆ é™¤å‰ä¸¤ä¸ªèŠ‚ç‚¹</span>
		<span class="n">forest</span><span class="o">=</span><span class="n">Head</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">forest</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">PreOrder</span><span class="p">(</span><span class="n">HuffmanNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">HuffmanNode</span> <span class="o">*</span><span class="n">Increase</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
	<span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">!=</span><span class="nb">NULL</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">Lnode</span><span class="o">==</span><span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">Rnode</span><span class="o">==</span><span class="nb">NULL</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">printf</span><span class="p">(</span><span class="s">"Node weight:%f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">weight</span><span class="p">);</span>
			<span class="k">for</span><span class="p">(</span><span class="n">Increase</span><span class="o">=</span><span class="n">root</span><span class="p">;</span><span class="n">Increase</span><span class="o">-&gt;</span><span class="n">Parent</span><span class="o">!=</span><span class="nb">NULL</span><span class="p">;</span><span class="n">Increase</span><span class="o">=</span><span class="n">Increase</span><span class="o">-&gt;</span><span class="n">Parent</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">if</span><span class="p">(</span><span class="n">Increase</span><span class="o">-&gt;</span><span class="n">Parent</span><span class="o">-&gt;</span><span class="n">Lnode</span><span class="o">==</span><span class="n">root</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="n">printf</span><span class="p">(</span><span class="s">"code 1</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
				<span class="p">}</span>
				<span class="k">else</span>
				<span class="p">{</span>
					<span class="n">printf</span><span class="p">(</span><span class="s">"code 0</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
				<span class="p">}</span>

			<span class="p">}</span>

		<span class="p">}</span>
		<span class="n">PreOrder</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">Lnode</span><span class="p">);</span>
		<span class="n">PreOrder</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">Rnode</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
    <span class="n">HuffmanNode</span> <span class="o">*</span><span class="n">p</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
	<span class="n">HuffmanNode</span> <span class="o">*</span><span class="n">current</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
    <span class="n">HuffmanNode</span> <span class="o">*</span><span class="n">Head</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
    <span class="n">p</span><span class="o">=</span><span class="n">InputNodes</span><span class="p">();</span>

	<span class="c1">// Test the function of MakeQueue</span>
	<span class="cm">/*	Head=MakeQueue(p);
	printf("Data after sorting:\n");
	for(current=Head;current!=NULL;current=current-&gt;next)
	{
		printf("%f  ",current-&gt;weight);
	}
	*/</span>

	<span class="n">Head</span><span class="o">=</span><span class="n">HuffmanForest</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
	<span class="n">PreOrder</span><span class="p">(</span><span class="n">Head</span><span class="p">);</span>
	
<span class="p">}</span></code></pre></figure>

<hr />

<h2 id="references">References</h2>
<p>[1].http://coolshell.cn/articles/7459.html</p>

<p>[2].http://blog.csdn.net/abcjennifer/article/details/8020695</p>

<p>[3].http://www.nowamagic.net/librarys/veda/detail/1852</p>

<p>[4].http://zh.wikipedia.org/wiki/%E9%9C%8D%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81</p>

<p>[5].Introduction to Algorithms.Page245~249</p>
:ET