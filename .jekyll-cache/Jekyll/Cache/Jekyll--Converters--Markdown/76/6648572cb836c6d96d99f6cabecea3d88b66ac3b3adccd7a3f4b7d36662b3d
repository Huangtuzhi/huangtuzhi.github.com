I"§#<h2 id="å®‰è£…sqlite3">å®‰è£…sqlite3</h2>

<p>sqliteæ˜¯ä¸€ä¸ªè½»å‹çš„å…³ç³»å‹æ•°æ®åº“ã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯é’ˆå¯¹åµŒå…¥å¼è®¾å¤‡ï¼Œç›®å‰å·²ç»åœ¨å¾ˆå¤šåµŒå…¥å¼äº§å“ä¸­ä½¿ç”¨äº†å®ƒã€‚ä¹Ÿå¯ä»¥å®ç°åƒ<a href="http://www.linuxidc.com/Linux/2012-04/58069.htm">ç”¨æˆ·ç™»å½•éªŒè¯</a>è¿™æ ·çš„åŠŸèƒ½ã€‚</p>

<p>åµŒå…¥å¼æ•°æ®åº“å…·æœ‰è¿™æ ·çš„ç‰¹ç‚¹ï¼š</p>

<ul>
  <li>SQLiteçš„æ•°æ®åº“æƒé™åªä¾èµ–äºæ–‡ä»¶ç³»ç»Ÿï¼Œæ²¡æœ‰ç”¨æˆ·å¸æˆ·çš„æ¦‚å¿µã€‚</li>
  <li>SQLiteæœ‰æ•°æ®åº“çº§é”å®šï¼Œæ²¡æœ‰ç½‘ç»œæœåŠ¡å™¨ã€‚</li>
  <li>SQLiteéœ€è¦çš„å†…å­˜å¼€é”€å¾ˆå°ï¼Œé€‚åˆç”¨äºåµŒå…¥å¼è®¾å¤‡ã€‚éœ€è¦åšçš„ä»…ä»…æ˜¯æŠŠå®ƒæ­£ç¡®çš„ç¼–è¯‘åˆ°ä½ çš„å¹³å°ä¸‹ã€‚</li>
</ul>

<p>ç¬”è€…åœ¨ubuntu14.04ç¯å¢ƒä¸‹è¿›è¡Œå®‰è£…ã€‚</p>

<ul>
  <li>æ‰§è¡Œå‘½ä»¤ <code class="language-plaintext highlighter-rouge">sudo apt-get install sqlite sqlite3</code>,å®‰è£…å³å¯å®Œæˆã€‚</li>
  <li>æ‰§è¡Œå‘½ä»¤ <code class="language-plaintext highlighter-rouge">sqlite -version</code>ï¼Œå¯ä»¥æŸ¥çœ‹ sqlite çš„ç‰ˆæœ¬</li>
  <li>cd ~ä¸‹åˆ›å»ºä¸€ä¸ªç›®å½•sqlite (<code class="language-plaintext highlighter-rouge">mkdir sqlite</code>)ï¼Œæ‰§è¡Œå‘½ä»¤<code class="language-plaintext highlighter-rouge">sqlite3 test.db</code>ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºtest.db çš„æ•°æ®åº“</li>
  <li>è¾“å…¥ <code class="language-plaintext highlighter-rouge">create table mytable(ld,name,age);</code> åˆ›å»ºäº†ä¸€ä¸ªåå­—å«mytabelçš„æ•°æ®è¡¨ï¼Œè¯¥æ•°æ®è¡¨å†…å®šä¹‰äº†ä¸‰ä¸ªå­—æ®µï¼Œåˆ†åˆ«ä¸º ldã€nameã€ageã€‚</li>
  <li>è¾“å…¥ <code class="language-plaintext highlighter-rouge">insert into mytable(ld,name,age) values(1, "huangyi",24);</code>å‘æ•°æ®è¡¨ä¸­æ’å…¥ç¬¬1ä¸ªæ•°æ®;</li>
  <li>è¾“å…¥ <code class="language-plaintext highlighter-rouge">insert into mytable(ld,name,age) values(2, "wangrubi",24);</code>å‘æ•°æ®è¡¨ä¸­æ’å…¥ç¬¬2ä¸ªæ•°æ®;</li>
</ul>

<p>æ‰§è¡Œå‘½ä»¤ <code class="language-plaintext highlighter-rouge">select * from mytable;</code>å¯ä»¥æ˜¾ç¤ºæ•°æ®è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   sqlite&gt; select * from mytable;
   ld|name|age
   1|huangyi|24
   2|wangrubi|24
</code></pre></div></div>

<hr />
<h2 id="sqlite-pythonåº“">sqlite pythonåº“</h2>

<p>sqliteåº“å·²ç»æˆä¸ºäº†pythonçš„æ ‡å‡†åº“ï¼Œæ¥å£å’Œä½¿ç”¨è¯´æ˜å‚è§[1]ã€‚</p>

<blockquote>
  <p>SQLite is a C library that provides a lightweight disk-based database that doesnâ€™t require a separate server process and allows accessing the database using a nonstandard variant of the SQL query language. sqlite3 was written by Gerhard HÃ¤ring and provides a SQL interface compliant with the DB-API 2.0 specificationã€‚</p>
</blockquote>

<hr />
<h2 id="å®ç°">å®ç°</h2>

<p>æŠŠpythonåº“æä¾›çš„æ“ä½œå‡½æ•°å°è£…æˆç±»å’Œæˆå‘˜å‡½æ•°çš„æ–¹å¼æ¥è°ƒç”¨ã€‚</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="cp">#! /usr/bin/python
# -*- coding: utf8 -
</span><span class="n">import</span> <span class="n">sqlite3</span>
<span class="n">class</span> <span class="n">SqliteFunction</span><span class="o">:</span>
    <span class="n">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="n">db_name</span><span class="p">)</span><span class="o">:</span>
        <span class="n">self</span><span class="p">.</span><span class="n">dbname</span> <span class="o">=</span> <span class="n">db_name</span>
        <span class="n">try</span><span class="o">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_name</span><span class="p">)</span> 
            <span class="n">self</span><span class="p">.</span><span class="n">cur</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">conn</span><span class="p">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="n">print</span><span class="p">(</span><span class="s">"Database "</span><span class="k">+</span><span class="n">db_name</span><span class="o">+</span><span class="s">" is opened successfully!"</span><span class="p">)</span>
        <span class="n">except</span> <span class="n">Exception</span> <span class="n">as</span> <span class="n">err</span><span class="o">:</span>
            <span class="n">print</span><span class="p">(</span><span class="n">str</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>

    <span class="n">def</span> <span class="n">close</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="o">:</span>
        <span class="n">try</span><span class="o">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">conn</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">print</span><span class="p">(</span><span class="s">"Database is closed successfully!"</span><span class="p">)</span>
        <span class="n">except</span> <span class="n">Exception</span> <span class="n">as</span> <span class="n">err</span><span class="o">:</span>
            <span class="n">print</span><span class="p">(</span><span class="n">str</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>

    <span class="n">def</span> <span class="n">run</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="n">sql</span><span class="p">)</span><span class="o">:</span>
        <span class="n">try</span><span class="o">:</span>        
            <span class="n">self</span><span class="p">.</span><span class="n">cur</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">conn</span><span class="p">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="n">self</span><span class="p">.</span><span class="n">cur</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
            <span class="n">self</span><span class="p">.</span><span class="n">conn</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="n">print</span><span class="p">(</span><span class="sc">'['</span><span class="k">+</span><span class="n">sql</span><span class="o">+</span><span class="sc">']'</span><span class="o">+</span><span class="s">"runs successfully"</span><span class="p">)</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="n">except</span> <span class="n">Exception</span> <span class="n">as</span> <span class="n">err</span><span class="o">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">conn</span><span class="p">.</span><span class="n">rollback</span><span class="p">()</span>
            <span class="n">print</span><span class="p">(</span><span class="n">str</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

<span class="n">SqliteDB</span><span class="o">=</span><span class="n">SqliteFunction</span><span class="p">(</span><span class="s">"test.db"</span><span class="p">)</span>
<span class="n">SqliteDB</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="s">"insert into mytable(ld,name,age)values(3,'vitual',0)</span><span class="p">;</span><span class="s">")</span><span class="err">
</span><span class="s">SqliteDB.run("</span><span class="n">select</span> <span class="o">*</span> <span class="n">from</span> <span class="n">mytable</span><span class="p">;</span><span class="s">")</span><span class="err">
</span><span class="s">SqliteDB.close()   </span></code></pre></figure>

<p>åœ¨ç»ˆç«¯ä¸‹æ‰§è¡Œ <code class="language-plaintext highlighter-rouge">./SqliteFunction</code>ä¹‹åï¼Œè¿›å…¥åˆ°test.dbæ•°æ®åº“ä¸­å¯ä»¥çœ‹è§å¤šäº†ä¸€æ¡è®°å½•<code class="language-plaintext highlighter-rouge"> 3|vitual|0</code></p>

<hr />
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>ä»¥ä¸Šå°±æ˜¯ä½¿ç”¨pythonæ“ä½œsqliteæ•°æ®åº“çš„ç®€å•ä¾‹å­ï¼Œå…¶å®å¼€å§‹ç¬”è€…æƒ³åšçš„æ˜¯ç”¨C++è°ƒç”¨Pythonæ¥å£æ¥æ“ä½œsqliteæ•°æ®åº“ï¼Œå€Ÿæ­¤å¤ä¹ ä¸€ä¸‹pythonå’ŒC++ã€‚è€Œä¸”ï¼Œsqlite[3]ä¸­å·²ç»ç›´æ¥æä¾›äº†C/C++æ¥å£ã€‚</p>

<p>å¦‚æœåœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­éœ€è¦æ•°æ®åº“å­˜å‚¨ç”¨æˆ·æ•°æ®(å¦‚GPSä½ç½®ï¼Œä¼ æ„Ÿå™¨æ•°æ®)æˆ–è€…å¤§é‡çš„å‘½ä»¤å‚æ•°(å¦‚æŸäº›ç¡¬ä»¶æ§åˆ¶çš„ç è¡¨)ï¼Œsqliteæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p>

<hr />
<h2 id="reference">Reference</h2>

<p>[1].http://docspy3zh.readthedocs.org/en/latest/library/sqlite3.html</p>

<p>[2].http://my.oschina.net/mlgb/blog/288261</p>

<p>[3].http://www.sqlite.org/cintro.html</p>

<p>[4].http://www.blogjava.net/xylz/archive/2012/09/25/388519.html</p>

<p>[5].http://blog.csdn.net/jianchi88/article/details/7037524</p>
:ET